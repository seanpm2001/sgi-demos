<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">

<TITLE>curve3.c Example C Language Program
</TITLE>
</HEAD>

<body bgcolor="#fcfbf0">
<center>
[  <a href="curve2_c.html">Previous</a>  |
<a href="curved_c.html">Next</a>  |
<A HREF="toc.html" TARGET="_parent">Contents</A>  
 <A HREF="../gl32prgd/specialterms.html">| Glossary</A>  
 <A HREF="../topnav/topnav.html" TARGET="_top"></A>  
 <A HREF="/cgi-bin/ds_form?config=/usr/share/man/info/en_US/a_doc_lib/data/base.cfg" TARGET="_top"></A>  ]
<hr>
<font color="#a62a2a" size="+2">
<i>GL3.2 for AIX: Graphics Library (GL) Technical Reference</i></font>
</center>
<hr size=3 noshade>
<H2><A NAME="A16C0c81c"></A>curve3.c Example C Language Program
</H2>
<A NAME="INDEX2221" REL="I1" TITLE="curve3.c example program (GL)"></A>
<A NAME="INDEX2222" REL="I1" TITLE="GL"></A>
<A NAME="INDEX2223" REL="I2" TITLE="example programs"></A>
<A NAME="INDEX2224" REL="I3" TITLE="curve segments"></A>
<A NAME="INDEX2225" REL="I1" TITLE="GL"></A>
<A NAME="INDEX2226" REL="I2" TITLE="drawing"></A>
<A NAME="INDEX2227" REL="I3" TITLE="Bezier curve segment"></A>
<A NAME="INDEX2228" REL="I1" TITLE="GL"></A>
<A NAME="INDEX2229" REL="I2" TITLE="curve segments"></A>
<A NAME="INDEX2230" REL="I3" TITLE="drawing"></A>
<PRE><A NAME="A64EA16367ttay"></A>/*
Example: curve3.c</PRE>
<PRE><A NAME="A64EA16575ttay"></A>This program draw a Bezier curve segment using curveit().  The
Cardinal spline and B-spline curve segments could be drawn in a
similar manner (only the basis matrix would be different).
*/</PRE>
<PRE><A NAME="A64EA16731ttay"></A>#include &lt;gl/gl.h>
#include &lt;gl/device.h></PRE>
<PRE><A NAME="A64EA16879ttay"></A>#define BEZIER 1</PRE>
<PRE><A NAME="A64EA17071ttay"></A>Matrix beziermatrix = {
  { -1.0,  3.0, -3.0,  1.0 } ,
  {  3.0, -6.0,  3.0,  0.0 },
  { -3.0,  3.0,  0.0,  0.0 },
  {  1.0,  0.0,  0.0,  0.0 }};</PRE>
<PRE><A NAME="A64EA17260ttay"></A>Matrix geom1 = {
  { 50.0, 150.0, 0.0, 1.0},
  { 150.0, 225.0, 0.0, 1.0},
  { 150.0, 075.0, 0.0, 1.0},
  { 250.0, 150.0, 0.0, 1.0}};</PRE>
<PRE><A NAME="A64EA17469ttay"></A>Matrix precisionmatrix = {
  { 6.0/8000.0,       0.0,    0.0, 0.0},
  { 6.0/8000.0, 2.0/400.0,    0.0, 0.0},
  { 1.0/8000.0, 1.0/400.0, 1/20.0, 0.0},
  {        0.0,       0.0,    0.0, 1.0}};</PRE>
<PRE><A NAME="A64EA17622ttay"></A>main()
{    
  int dev,val;    </PRE>
<PRE><A NAME="A64EA17770ttay"></A>  initialize();    </PRE>
<PRE><A NAME="A64EA18004ttay"></A>  while (TRUE) {        
    if (qtest()) {            
      dev = qread(&amp;val);            
      if (dev == ESCKEY) {
        gexit();
        exit();
      }
      else if (dev == REDRAW) {
        reshapeviewport();
        drawcurve();
      }
    }
  }</PRE>
<PRE><A NAME="A64EA18147ttay"></A>}</PRE>
<PRE><A NAME="A64EA18301ttay"></A>initialize()
{    
  int gid;    </PRE>
<PRE><A NAME="A64EA18495ttay"></A>  prefposition(200, 500, 100, 400);
  gid = winopen("curve3");    
&nbsp;&nbsp;&nbsp;winconstraints();
  qdevice(ESCKEY);
  qdevice(REDRAW);
  qenter(REDRAW,gid);
}</PRE>
<PRE><A NAME="A64EA18650ttay"></A>drawcurve()
{    
  int i,xx,yy;</PRE>
<PRE><A NAME="A64EA18860ttay"></A>  color(BLACK);
  clear();
  pushmatrix();                /* the current transformation 
                                * matrix on the matrix stack is 
                                * saved */</PRE>
<PRE><A NAME="A64EA19112ttay"></A>  multmatrix(geom1);           /* the product of the current 
                                * transformation matrix and the 
                                * matrix containing the 
                                * control points becomes the new 
                                * current transformation matrix */</PRE>
<PRE><A NAME="A64EA19356ttay"></A>  multmatrix(beziermatrix);    /* the product of the basis 
                                * matrix and the current 
                                * transformation matrix becomes 
                                * the new current transformation 
                                * matrix */</PRE>
<PRE><A NAME="A64EA19601ttay"></A>  multmatrix(precisionmatrix); /* the product of the precision 
                                * matrix and the current 
                                * transformation matrix 
                                * becomes the new current 
                                * transformation matrix */</PRE>
<PRE><A NAME="A64EA19825ttay"></A>  move(0.0,0.0,0.0);           /* this command must be issued 
                                * so that the correct first 
                                * point is generated by the 
                                * curveit command */</PRE>
<PRE><A NAME="A64EA1A013ttay"></A>  color(RED);
  curveit(20);                 /* a curve consisting of 20 line 
                                * segments is drawn */</PRE>
<PRE><A NAME="A64EA1A196ttay"></A>  popmatrix();                 /* the original transformation 
                                * matrix is restored */</PRE>
<PRE><A NAME="A64EA1A423ttay"></A>    /* show the control points */
  color(WHITE);
  for ( i = 0 ; i &lt; 4 ; i++ )  {
    for ( xx = -2 ; xx &lt; 2 ; xx++) {
      for ( yy = -2 ; yy &lt; 2 ; yy++) {
        pnt2( geom1[i][0] + (Coord) xx , geom1[i][1] + (Coord) yy);
      }
    }
  }</PRE>
<PRE><A NAME="A64EA1A566ttay"></A>}</PRE>
<PRE><A NAME="A64EA1A889ttay"></A>/*
  Changes: 
    - the control points are drawn on the screen
    - added winconstraints() so the window could be resized
    - changes the geometry so it would be centered
      from:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Matrix geom1 = {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ 100.0, 100.0, 0.0, 1.0},
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ 200.0, 200.0, 0.0, 1.0},
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ 200.0,   0.0, 0.0, 1.0},
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ 300.0, 100.0, 0.0, 1.0}};
      to:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Matrix geom1 = {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ 100.0, 150.0, 0.0, 1.0},
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ 200.0, 225.0, 0.0, 1.0},
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ 200.0, 075.0, 0.0, 1.0},
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ 300.0, 150.0, 0.0, 1.0}};
*/</PRE>

<H3><A NAME="A200C1144"></A>Related Information</H3>
<P><A NAME="E1D77BD312ceb"></A>The <A HREF="curveit.html#LPS22c0marj"><B>curveit</B></A> subroutine<A HREF="LPS22c0marj" REL="PAGENUM"></A>, the <A HREF="multmatrix.html#A144X9474"><B>multmatrix</B></A> subroutine<A HREF="A144X9474" REL="PAGENUM"></A>.</P>

<P><A NAME="E1D77BD339ceb"></A><!--gl32prgd:--><A HREF="../gl32prgd/drawwfcvs.html#DB213a0marj">Drawing Curves</A> in<I> GL3.2 Version 4 for AIX: Programming Concepts</I>.</P>

<hr><center>
[  <a href="curve2_c.html">Previous</a>  |
<a href="curved_c.html">Next</a>  |
<A HREF="toc.html" TARGET="_parent">Contents</A>  
 <A HREF="../gl32prgd/specialterms.html">| Glossary</A>  
 <A HREF="../topnav/topnav.html" TARGET="_top"></A>  
 <A HREF="/cgi-bin/ds_form?config=/usr/share/man/info/en_US/a_doc_lib/data/base.cfg" TARGET="_top"></A>  ]
</center></BODY>

</HTML>


